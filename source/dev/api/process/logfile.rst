日志
======================

说明
-----------------------------------------------------------------------------------------------------------------------
- 获取流程调试日志


1、轮询获取，每次指定row(已读行号)实现滚动输出
-----------------------------------------------------------------------------------------------------------------------


**请求方式：**   GET

**请求地址：**   /api/process/logfile


**Content-Type：**
::

    application/x-www-form-urlencoded —— 表示通过表单方式提交


**查询参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| jobId                  | string     | 是         | 作业id                                         |
+------------------------+------------+------------+------------------------------------------------+
| row                    | int        | 是         | 行号                                           |
+------------------------+------------+------------+------------------------------------------------+


**输入参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
|                        | string     | 否         |                                                |
+------------------------+------------+------------+------------------------------------------------+


**输出参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| logcontent             | string     | 是         | 日志内容                                       |
+------------------------+------------+------------+------------------------------------------------+

**日志查询请求示例：**
::

    /api/process/logfile?jobId=job001&row=0


**日志查询返回数据示例：**

-  Content-Type: 'application/json'

::

    {
        "logcontent":"2020-11-26 13:29:35.323 NIO | PID | THREAD tsids2 >>>>>>>>process start \n
                      2020-11-26 13:29:36.323 NIO | PID | THREAD tsids2 >>>>>>>>process execute...
                      2020-11-26 13:29:37.323 NIO | PID | THREAD tsids2 >>>>>>>>process execute...
                      2020-11-26 13:29:38.323 NIO | PID | THREAD tsids2 >>>>>>>>process execute...
                      2020-11-26 13:29:40.323 NIO | PID | THREAD tsids2 >>>>>>>>process end"
    }


**日志查询错误返回示例：**
::

    {
        "detail":"流程试运行发生异常"
    }


2、下载日志文件
-----------------------------------------------------------------------------------------------------------------------


**请求方式：**   GET

**请求地址：**   /api/process/logfile/download


**Content-Type：**
::

    application/x-www-form-urlencoded —— 表示通过表单方式提交


**查询参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| jobId                  | string     | 是         | 作业id                                         |
+------------------------+------------+------------+------------------------------------------------+


**输入参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
|                        | string     | 否         |                                                |
+------------------------+------------+------------+------------------------------------------------+


**输出参数：**

+------------------------+------------+------------+------------------------------------------------+
|**参数**                |**数据类型**|**是否必须**|**说明**                                        |
+------------------------+------------+------------+------------------------------------------------+
| logcontent             | string     | 否         | 日志内容                                       |
+------------------------+------------+------------+------------------------------------------------+

**日志下载请求示例：**
::

    wget http://ip:port/api/process/logfile?jobId=job001


**日志下载返回数据示例：**

- Content-Type: 'application/octet-stream'

::

    返回二进制文件



**日志查询错误返回示例：**
::

    {
        "detail":"日志未找不到"
    }

